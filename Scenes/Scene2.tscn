[gd_scene load_steps=48 format=2]

[ext_resource path="res://Scenes/Scene2.gd" type="Script" id=1]
[ext_resource path="res://DialogTest.tscn" type="PackedScene" id=2]
[ext_resource path="res://DialogTest.gd" type="Script" id=3]
[ext_resource path="res://images/Level 2_final/level_2_final_main_sansfox.png" type="Texture" id=4]
[ext_resource path="res://images/Level 2_final/level_2_final_foxlights.png" type="Texture" id=5]
[ext_resource path="res://floor.tscn" type="PackedScene" id=6]
[ext_resource path="res://CaveFloor1.tscn" type="PackedScene" id=7]
[ext_resource path="res://CaveFloor3.tscn" type="PackedScene" id=8]
[ext_resource path="res://CaveFloor4.tscn" type="PackedScene" id=9]
[ext_resource path="res://KaduvFloor.tscn" type="PackedScene" id=10]
[ext_resource path="res://RockFloor.tscn" type="PackedScene" id=11]
[ext_resource path="res://FallingRock.tscn" type="PackedScene" id=12]
[ext_resource path="res://images/kivid/level_2_rock1.png" type="Texture" id=13]
[ext_resource path="res://images/kivid/level_2_rock4.png" type="Texture" id=14]
[ext_resource path="res://images/kivid/level_2_rock5.png" type="Texture" id=15]
[ext_resource path="res://images/kivid/level_2_rock6.png" type="Texture" id=16]
[ext_resource path="res://images/kivid/level_2_rock7.png" type="Texture" id=17]
[ext_resource path="res://images/kivid/level_2_rock9.png" type="Texture" id=18]
[ext_resource path="res://Falling.tscn" type="PackedScene" id=19]
[ext_resource path="res://Falling.gd" type="Script" id=20]
[ext_resource path="res://Enemy2.tscn" type="PackedScene" id=21]
[ext_resource path="res://Enemy3.tscn" type="PackedScene" id=22]
[ext_resource path="res://Sounds/back/Märt Nigu - Avatud - 4. Avatud IV.ogg" type="AudioStream" id=23]
[ext_resource path="res://Vanamees.tscn" type="PackedScene" id=24]
[ext_resource path="res://Flamefruite.tscn" type="PackedScene" id=25]
[ext_resource path="res://HUD.tscn" type="PackedScene" id=26]
[ext_resource path="res://Pause.tscn" type="PackedScene" id=27]
[ext_resource path="res://ElderTalk.tscn" type="PackedScene" id=28]
[ext_resource path="res://Scenes/Chara.tscn" type="PackedScene" id=29]
[ext_resource path="res://images/Level 2_final/level_2_final_mountains.png" type="Texture" id=30]
[ext_resource path="res://images/Level 2_final/closed_cave2.png" type="Texture" id=31]
[ext_resource path="res://Scenes/HideCave.gd" type="Script" id=32]
[ext_resource path="res://images/Level 2_final/level_2_final_main_cave_boss.png" type="Texture" id=33]
[ext_resource path="res://Scenes/LevelComplete.tscn" type="PackedScene" id=34]
[ext_resource path="res://HealthGate.tscn" type="PackedScene" id=35]
[ext_resource path="res://images/Level 2_final/level_2_final_värav1_fire_inside.png" type="Texture" id=36]
[ext_resource path="res://images/Level 2_final/level_2_final_värav1_empty.png" type="Texture" id=37]
[ext_resource path="res://images/Level 2_final/level_2_final_värav2_fire_inside.png" type="Texture" id=38]
[ext_resource path="res://images/Level 2_final/level_2_final_värav2_empty.png" type="Texture" id=39]
[ext_resource path="res://images/Level 2_final/level_2_final_värav2_activated.png" type="Texture" id=40]
[ext_resource path="res://icon.png" type="Texture" id=41]
[ext_resource path="res://images/Level 2_final/level_2_final_kristall.png" type="Texture" id=42]
[ext_resource path="res://images/Level 2_final/level_2_final_valgusvihud.png" type="Texture" id=43]

[sub_resource type="PhysicsMaterial" id=1]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=2]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=3]
friction = 0.0

[sub_resource type="RectangleShape2D" id=4]
extents = Vector2( 56.7445, 51.4932 )

[node name="Scene2" type="Node"]
script = ExtResource( 1 )

[node name="Dialoog" parent="." instance=ExtResource( 2 )]
script = ExtResource( 3 )

[node name="Background" type="Node2D" parent="."]

[node name="BG" type="Sprite" parent="Background"]
position = Vector2( 2058.82, 838.424 )
scale = Vector2( 0.618, 0.618 )
texture = ExtResource( 4 )

[node name="BG2" type="Sprite" parent="Background"]
position = Vector2( 1836.82, 1282.42 )
scale = Vector2( 0.618, 0.618 )
texture = ExtResource( 5 )

[node name="Modulate" type="Timer" parent="Background"]

[node name="Floor" type="Node2D" parent="."]
editor/display_folded = true
visible = false

[node name="NormalFloor" type="Node2D" parent="Floor"]

[node name="floor" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 397.404, 1644.53 )
scale = Vector2( 3.937, 1 )

[node name="floor15" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 40.1416, 1275.29 )
rotation = 1.58503
scale = Vector2( 3.937, 1 )

[node name="floor14" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 1268.55, 1651.95 )
scale = Vector2( 1.1, 1 )

[node name="floor2" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 514.917, 1125.84 )
scale = Vector2( 2.26126, 1 )

[node name="floor3" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 1462.34, 1397.5 )
scale = Vector2( 3.93129, 1 )

[node name="floor4" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 1694.53, 1774.94 )
scale = Vector2( 2.86478, 1 )

[node name="floor5" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 2242.13, 1456.43 )
scale = Vector2( 1.91354, 1 )

[node name="floor6" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 2816.04, 1625.86 )
scale = Vector2( 2.17728, 1 )

[node name="floor7" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 3275.18, 1786.51 )
scale = Vector2( 3.15195, 1 )

[node name="floor8" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 2844.44, 974.944 )
scale = Vector2( 1.54908, 1 )

[node name="floor12" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 2588.6, 827.349 )
scale = Vector2( 1.54908, 1 )

[node name="floor13" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 3483.6, 792.994 )
scale = Vector2( 1.54908, 1 )

[node name="floor9" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 3010.17, 754.279 )
scale = Vector2( 1.99478, 1 )

[node name="floor10" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 3360.48, 592.492 )
scale = Vector2( 1.09192, 0.995075 )

[node name="floor11" parent="Floor/NormalFloor" instance=ExtResource( 6 )]
position = Vector2( 2666.2, 600.208 )
scale = Vector2( 1.06935, 1 )

[node name="CaveFloor" type="Node2D" parent="Floor"]
visible = false

[node name="CaveFloor1" parent="Floor/CaveFloor" instance=ExtResource( 7 )]
position = Vector2( 2568.75, 804.31 )
rotation = 0.577704
mode = 3
physics_material_override = SubResource( 1 )
gravity_scale = 0.0
can_sleep = false

[node name="CaveFloor2" parent="Floor/CaveFloor" instance=ExtResource( 7 )]
position = Vector2( 3503.24, 821.923 )
rotation = -0.488216
mode = 3
physics_material_override = SubResource( 1 )
gravity_scale = 0.0
can_sleep = false

[node name="CaveFloor3" parent="Floor/CaveFloor" instance=ExtResource( 8 )]
position = Vector2( 3651.43, 353.308 )
rotation = 1.5708
mode = 3
physics_material_override = SubResource( 2 )
gravity_scale = 0.0
can_sleep = false

[node name="CaveFloor4" parent="Floor/CaveFloor" instance=ExtResource( 9 )]
position = Vector2( 2330.73, 200.798 )
rotation = 1.5708
mode = 3
physics_material_override = SubResource( 3 )
gravity_scale = 0.0
can_sleep = false

[node name="CaveFloor5" parent="Floor/CaveFloor" instance=ExtResource( 9 )]
position = Vector2( 2680.18, -241.325 )
rotation = 3.17721
mode = 3
physics_material_override = SubResource( 3 )
gravity_scale = 0.0
can_sleep = false

[node name="CaveFloor6" parent="Floor/CaveFloor" instance=ExtResource( 9 )]
position = Vector2( 3474.73, -111.183 )
rotation = 3.44838
mode = 3
physics_material_override = SubResource( 3 )
gravity_scale = 0.0
can_sleep = false

[node name="KaduvFloor" parent="Floor" instance=ExtResource( 10 )]
position = Vector2( 3081.61, 965.508 )

[node name="Rockfloor" type="Node2D" parent="Floor"]
visible = false

[node name="RockFloor" parent="Floor/Rockfloor" instance=ExtResource( 11 )]
position = Vector2( 2538.98, 803.694 )
rotation = 0.610388

[node name="RockFloor2" parent="Floor/Rockfloor" instance=ExtResource( 11 )]
position = Vector2( 2328.12, 341.581 )
rotation = 1.5708

[node name="RockFloor3" parent="Floor/Rockfloor" instance=ExtResource( 11 )]
position = Vector2( 3654.42, 430.551 )
rotation = 1.5708

[node name="RockFloor4" parent="Floor/Rockfloor" instance=ExtResource( 11 )]
position = Vector2( 3544.13, 811.238 )
rotation = 2.66437

[node name="Kivid" type="Node2D" parent="."]
editor/display_folded = true

[node name="TestRock" parent="Kivid" instance=ExtResource( 12 )]
position = Vector2( 803.963, 1524.65 )
scale = Vector2( 0.7, 0.7 )

[node name="Sprite2" type="Sprite" parent="Kivid/TestRock"]
position = Vector2( 0, 9.99951 )
scale = Vector2( 0.689954, 0.689954 )
texture = ExtResource( 13 )

[node name="TestRock2" parent="Kivid" instance=ExtResource( 12 )]
position = Vector2( 934.3, 1388.33 )
scale = Vector2( 0.8, 0.8 )

[node name="Sprite2" type="Sprite" parent="Kivid/TestRock2"]
position = Vector2( 0, 10 )
scale = Vector2( 0.735437, 0.735437 )
texture = ExtResource( 13 )

[node name="TestRock3" parent="Kivid" instance=ExtResource( 12 )]
position = Vector2( 778.002, 1243.58 )
scale = Vector2( 0.8, 0.7 )

[node name="Sprite2" type="Sprite" parent="Kivid/TestRock3"]
position = Vector2( 0, 11.4286 )
scale = Vector2( 0.725712, 0.725712 )
texture = ExtResource( 13 )

[node name="TestRock4" parent="Kivid" instance=ExtResource( 12 )]
position = Vector2( 1972.58, 1620.21 )
scale = Vector2( 1.33207, 0.94 )

[node name="Sprite2" type="Sprite" parent="Kivid/TestRock4"]
position = Vector2( 0, 13.9216 )
scale = Vector2( 0.409657, 0.546143 )
texture = ExtResource( 14 )

[node name="TestRock5" parent="Kivid" instance=ExtResource( 12 )]
position = Vector2( 2516.18, 1556.98 )
scale = Vector2( 0.772082, 0.902586 )

[node name="Sprite2" type="Sprite" parent="Kivid/TestRock5"]
position = Vector2( 0, 8.8634 )
scale = Vector2( 0.680266, 0.680266 )
texture = ExtResource( 15 )

[node name="TestRock6" parent="Kivid" instance=ExtResource( 12 )]
editor/display_folded = true
position = Vector2( 3037.84, 1484.19 )
scale = Vector2( 0.732062, 0.782586 )

[node name="Sprite2" type="Sprite" parent="Kivid/TestRock6"]
position = Vector2( 0, 10.2224 )
scale = Vector2( 0.707749, 0.707749 )
texture = ExtResource( 16 )

[node name="TestRock7" parent="Kivid" instance=ExtResource( 12 )]
position = Vector2( 3194.63, 1379.88 )
scale = Vector2( 1.36638, 0.884961 )

[node name="Sprite2" type="Sprite" parent="Kivid/TestRock7"]
position = Vector2( 0, 13.1879 )
scale = Vector2( 0.353051, 0.553203 )
texture = ExtResource( 17 )

[node name="TestRock8" parent="Kivid" instance=ExtResource( 12 )]
editor/display_folded = true
position = Vector2( 3321.73, 1247.53 )
scale = Vector2( 0.905099, 0.884961 )

[node name="Sprite2" type="Sprite" parent="Kivid/TestRock8"]
position = Vector2( 0, 6.78003 )
scale = Vector2( 0.678767, 0.678767 )
texture = ExtResource( 16 )

[node name="TestRock9" parent="Kivid" instance=ExtResource( 12 )]
position = Vector2( 3074.21, 1137.19 )
scale = Vector2( 1.9451, 0.884961 )

[node name="Sprite2" type="Sprite" parent="Kivid/TestRock9"]
position = Vector2( -0.570313, 29.9659 )
scale = Vector2( 0.272401, 0.590852 )
texture = ExtResource( 18 )

[node name="Falling" parent="." instance=ExtResource( 19 )]
position = Vector2( 2071.73, 2286.53 )
scale = Vector2( 1.50685, 1.58729 )
script = ExtResource( 20 )
change_level = "res://Scenes/Scene2.tscn"

[node name="Enemies" type="Node2D" parent="."]
editor/display_folded = true

[node name="Enemy2" parent="Enemies" instance=ExtResource( 21 )]
position = Vector2( 2972.52, 111.094 )
scale = Vector2( 0.586775, 0.586775 )

[node name="Enemy3" parent="Enemies" instance=ExtResource( 22 )]
position = Vector2( 1581.25, 1709.74 )
scale = Vector2( 0.520737, 0.500101 )
hp = 4

[node name="Enemy5" parent="Enemies" instance=ExtResource( 22 )]
position = Vector2( 2198.47, 1404.21 )
scale = Vector2( 0.520737, 0.500101 )
hp = 4

[node name="Enemy6" parent="Enemies" instance=ExtResource( 22 )]
position = Vector2( 2836.19, 1564.15 )
scale = Vector2( 0.520737, 0.500101 )
hp = 4

[node name="Enemy4" parent="Enemies" instance=ExtResource( 22 )]
position = Vector2( 566.232, 1065.87 )
scale = Vector2( 0.520737, 0.500101 )
hp = 4

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 23 )

[node name="Vanamees" parent="." instance=ExtResource( 24 )]
position = Vector2( 1601.9, 1292.11 )

[node name="Flamefruits" type="Node2D" parent="."]
editor/display_folded = true
position = Vector2( 1259.94, 1571.93 )
scale = Vector2( 0.7, 0.7 )

[node name="Flamefruite" parent="Flamefruits" instance=ExtResource( 25 )]
scale = Vector2( 1, 1 )
z_index = 2

[node name="Flamefruite3" parent="Flamefruits" instance=ExtResource( 25 )]
position = Vector2( 1788.36, -150.886 )
scale = Vector2( 1, 1 )

[node name="Flamefruite2" parent="Flamefruits" instance=ExtResource( 25 )]
position = Vector2( -686.95, -572.713 )
scale = Vector2( 1, 1 )

[node name="Flamefruite8" parent="Flamefruits" instance=ExtResource( 25 )]
position = Vector2( 1013.34, -62.0286 )
scale = Vector2( 1, 1 )

[node name="Flamefruite5" parent="Flamefruits" instance=ExtResource( 25 )]
position = Vector2( 2760.91, -411.786 )
scale = Vector2( 1, 1 )

[node name="Flamefruite6" parent="Flamefruits" instance=ExtResource( 25 )]
position = Vector2( 2945.87, -589.229 )
scale = Vector2( 1, 1 )

[node name="Flamefruite7" parent="Flamefruits" instance=ExtResource( 25 )]
position = Vector2( 2575.04, -762.657 )
scale = Vector2( 1, 1 )

[node name="Flamefruite9" parent="Flamefruits" instance=ExtResource( 25 )]
position = Vector2( 2016.76, -1473.49 )
scale = Vector2( 1, 1 )

[node name="Flamefruite10" parent="Flamefruits" instance=ExtResource( 25 )]
position = Vector2( 3016.47, -1486.47 )
scale = Vector2( 1, 1 )

[node name="Flamefruite4" parent="Flamefruits" instance=ExtResource( 25 )]
position = Vector2( 2539.13, -284.471 )
scale = Vector2( 1, 1 )

[node name="HUD" parent="." instance=ExtResource( 26 )]

[node name="Menüü" type="CanvasLayer" parent="."]
editor/display_folded = true

[node name="Pause" parent="Menüü" instance=ExtResource( 27 )]
visible = false

[node name="ElderTalk" parent="." instance=ExtResource( 28 )]
position = Vector2( 1535.19, 1274.71 )

[node name="Close cave" type="Area2D" parent="."]
editor/display_folded = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Close cave"]
position = Vector2( 3015.33, 622.816 )
shape = SubResource( 4 )

[node name="Chara" parent="." instance=ExtResource( 29 )]
editor/display_folded = true
position = Vector2( 270, 1550.08 )

[node name="Camera2D" type="Camera2D" parent="Chara"]
offset = Vector2( 100, 0 )
current = true
zoom = Vector2( 0.8, 0.8 )
limit_left = 60
limit_top = -400
limit_right = 3960
limit_bottom = 2100
editor_draw_limits = true
editor_draw_drag_margin = true

[node name="ParallaxBackground" type="ParallaxBackground" parent="Chara"]

[node name="ParallaxLayer" type="ParallaxLayer" parent="Chara/ParallaxBackground"]
motion_scale = Vector2( 0.7, 0.7 )

[node name="Mountains2" type="Sprite" parent="Chara/ParallaxBackground/ParallaxLayer"]
position = Vector2( -171.431, 84.707 )
scale = Vector2( 0.815702, 0.669773 )
texture = ExtResource( 30 )
centered = false
__meta__ = {
"_edit_lock_": true
}

[node name="HideCave" type="Sprite" parent="."]
visible = false
position = Vector2( 3016.21, 459.803 )
scale = Vector2( 0.625381, 0.569736 )
texture = ExtResource( 31 )
script = ExtResource( 32 )

[node name="blackoutsidecave" type="Sprite" parent="."]
visible = false
position = Vector2( 2765.06, 566.371 )
scale = Vector2( 0.634157, 0.630992 )
texture = ExtResource( 33 )

[node name="LevelComplete" parent="." instance=ExtResource( 34 )]
editor/display_folded = true
position = Vector2( 263.66, 1538.41 )
rotation = -3.14159
scale = Vector2( 0.7, -0.7 )
target_spawn_group = "second_spawn"

[node name="Area2D2" parent="LevelComplete" instance=ExtResource( 35 )]
position = Vector2( -55.5069, -68.9036 )
rotation = 3.14159
scale = Vector2( 1.25, -1.25 )
levelcomplete = "levelcomplete"

[node name="GateFire" type="Sprite" parent="LevelComplete"]
position = Vector2( -64.843, -47.9653 )
rotation = 3.14159
scale = Vector2( 1, -1 )
texture = ExtResource( 36 )

[node name="GateEmpty" type="Sprite" parent="LevelComplete"]
position = Vector2( -64.843, -6.47168 )
rotation = 3.14159
scale = Vector2( 1, -1 )
texture = ExtResource( 37 )

[node name="GateOnFire" type="Sprite" parent="LevelComplete"]
position = Vector2( -64.843, -6.47168 )
rotation = 3.14159
scale = Vector2( 1, -1 )
texture = ExtResource( 37 )

[node name="LevelComplete2" parent="." instance=ExtResource( 34 )]
editor/display_folded = true
position = Vector2( 3891.41, 1394.3 )
scale = Vector2( 0.7, 0.7 )
change_level = "res://Scenes/Scene2.tscn"

[node name="Area2D" parent="LevelComplete2" instance=ExtResource( 35 )]
position = Vector2( 17.4883, -73.3425 )
scale = Vector2( 1.42857, 1.42857 )
levelcomplete = "levelcomplete2"

[node name="GateFire" type="Sprite" parent="LevelComplete2"]
position = Vector2( 11.2715, -40.5287 )
texture = ExtResource( 38 )

[node name="GateEmpty" type="Sprite" parent="LevelComplete2"]
position = Vector2( 9.84277, 0.900024 )
texture = ExtResource( 39 )

[node name="GateOnFire" type="Sprite" parent="LevelComplete2"]
position = Vector2( 9.84277, 2.32837 )
texture = ExtResource( 40 )

[node name="Sprite" type="Sprite" parent="LevelComplete2"]
visible = false
modulate = Color( 0, 0, 0, 1 )
position = Vector2( 27.0483, 162.291 )
scale = Vector2( 6.64636, 1 )
texture = ExtResource( 41 )

[node name="RockFloor5" parent="LevelComplete2" instance=ExtResource( 11 )]
visible = false
position = Vector2( 32.7188, 145.096 )
scale = Vector2( 0.714286, 1.42857 )

[node name="RockFloor6" parent="LevelComplete2" instance=ExtResource( 11 )]
visible = false
position = Vector2( 238.112, -58.2241 )
rotation = -1.60126
scale = Vector2( 0.714286, 1.42857 )

[node name="Crystal" type="Sprite" parent="."]
position = Vector2( 1541.95, 1014.32 )
texture = ExtResource( 42 )

[node name="Light2D" type="Light2D" parent="."]
visible = false
position = Vector2( 2064.64, 1303.52 )
scale = Vector2( 0.6, 0.6 )
texture = ExtResource( 43 )
energy = 1.1
[connection signal="timeout" from="Background/Modulate" to="." method="_on_Modulate_timeout"]
[connection signal="body_entered" from="ElderTalk" to="Dialoog" method="_on_ElderTalk_body_entered"]
[connection signal="body_exited" from="ElderTalk" to="Dialoog" method="_on_ElderTalk_body_exited"]
[connection signal="body_entered" from="Close cave" to="." method="_on_Close_cave_body_entered"]
[connection signal="body_entered" from="Close cave" to="Floor/KaduvFloor" method="_on_Area2D_body_entered"]
[connection signal="hp_changed" from="Chara" to="HUD" method="update_healthbar"]
[connection signal="mp_changed" from="Chara" to="HUD" method="update_manabar"]
